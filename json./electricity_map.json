{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "background": "#f9fafb",
  "description": "Electricity consumption by Australian state or territory.",
  "width": "container",
  "autosize": { "type": "fit", "contains": "padding" },
  "padding": { "left": 8, "right": 8, "top": 6, "bottom": 6 },
  "height": 380,
  "data": {
    "url": "https://raw.githubusercontent.com/ananya21233/FIT3179_Assignment_2/main/json./ne_10m(1).json",
    "format": { "type": "topojson", "feature": "ne_10m_admin_1_states_provinces" }
  },
  "transform": [
    { "filter": "datum.properties.adm0_a3 == 'AUS'" },
    {
      "lookup": "properties.name",
      "from": {
        "data": {
          "url": "https://raw.githubusercontent.com/ananya21233/FIT3179_Assignment_2/main/data/Breakdown_of_consumption.csv"
        },
        "key": "State",
        "fields": ["Consumption"]
      }
    },
    {
      "calculate": "toNumber(join(split(datum.Consumption, ','), ''))",
      "as": "ConsumptionNum"
    }
  ],
  "projection": { "type": "mercator" },
  "mark": { "type": "geoshape", "stroke": "white", "strokeWidth": 0.5 },
  "encoding": {
    "color": {
      "field": "ConsumptionNum",
      "type": "quantitative",
      "title": "Electricity Consumption (MWh)",
      "scale": { "scheme": "reds" },
      "legend": {
      "labelFontSize": 15,
      "titleFontSize": 17
    }
    },
    "tooltip": [
      { "field": "properties.name", "type": "nominal", "title": "State" },
      { "field": "ConsumptionNum", "type": "quantitative", "title": "Consumption", "format": ",.1f" }
    ]
  },
  "config": { 
    "font": "'Times New Roman', Times, serif",
    "view": { "stroke": null } 
  }
}
